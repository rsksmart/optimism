
<div align="center">
  <div>
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100px" viewBox="39.3 0 100 29.7" style="background-color: rgb(255, 255, 255);">
      <defs/>
      <g clip-path="url(#clip0_2294_8879)"><path d="M32.4087 25.8857V4.49951H41.4337C43.0323 4.49951 44.3984 4.74467 45.5029 5.23498C46.6074 5.72529 47.4503 6.40307 48.0171 7.26833C48.5839 8.13358 48.86 9.14305 48.86 10.2967C48.86 11.1908 48.7002 11.984 48.3659 12.705C48.0316 13.4261 47.5375 14.0173 46.869 14.5076C46.2005 14.9979 45.4012 15.3296 44.442 15.5171V15.7046C45.1687 15.8776 45.779 16.166 46.2732 16.5698C46.7673 16.9736 47.1742 17.4639 47.4939 18.0263C47.8282 18.6032 48.1188 19.2954 48.3804 20.1318L50.2261 25.8713H45.6337L44.006 20.7663C43.7735 19.9443 43.4974 19.3098 43.1776 18.8483C42.8579 18.3868 42.451 18.0552 41.9278 17.8533C41.4046 17.6514 40.7361 17.536 39.8932 17.536H36.8994V25.8569H32.4087V25.8857ZM40.6634 14.1183C41.4191 14.1183 42.0731 14.0029 42.6399 13.7866C43.1922 13.5703 43.6282 13.2242 43.9333 12.7627C44.2385 12.3012 44.3984 11.7244 44.3984 11.061C44.3984 10.3832 44.2385 9.82083 43.9333 9.37378C43.6282 8.92673 43.1922 8.59505 42.6399 8.39316C42.0877 8.19127 41.4191 8.0759 40.6634 8.0759H36.8994V14.1327H40.6634V14.1183Z" fill="#000000"></path><path d="M59.1203 26.246C57.4926 26.246 56.0247 25.8855 54.7168 25.1789C53.3943 24.4723 52.3624 23.4628 51.6067 22.1649C50.851 20.867 50.4731 19.3817 50.4731 17.7089C50.4731 16.0505 50.851 14.5651 51.5922 13.2672C52.3334 11.9693 53.3797 10.9455 54.6877 10.2244C56.0102 9.48894 57.4926 9.12842 59.1493 9.12842C60.8061 9.12842 62.2885 9.48894 63.5964 10.2244C64.9044 10.9455 65.9362 11.9693 66.6774 13.2672C67.4186 14.5651 67.7965 16.0505 67.7965 17.7233C67.7965 19.3817 67.4186 20.867 66.6629 22.1649C65.9072 23.4628 64.8753 24.4723 63.5674 25.1933C62.2449 25.8855 60.7625 26.246 59.1203 26.246ZM59.1203 22.6841C59.9487 22.6841 60.6898 22.4822 61.3438 22.0784C61.9978 21.6746 62.521 21.0978 62.9134 20.3479C63.2912 19.598 63.4947 18.7183 63.4947 17.7089C63.4947 16.7138 63.3058 15.8341 62.9279 15.0698C62.5501 14.3199 62.0269 13.7287 61.3729 13.3249C60.7189 12.9211 59.9632 12.7048 59.1348 12.7048C58.3064 12.7048 57.5652 12.9067 56.9113 13.3249C56.2573 13.7287 55.7341 14.3199 55.3562 15.0698C54.9784 15.8197 54.7894 16.7138 54.7894 17.7233C54.7894 18.7183 54.9784 19.598 55.3708 20.3479C55.7486 21.0978 56.2718 21.6746 56.9258 22.0784C57.5507 22.4822 58.2919 22.6841 59.1203 22.6841Z" fill="#000000"></path><path d="M77.6645 26.246C76.0368 26.246 74.5689 25.8855 73.261 25.1789C71.9385 24.4723 70.9066 23.4628 70.1509 22.1649C69.3952 20.867 69.0173 19.3817 69.0173 17.7089C69.0173 16.0505 69.3952 14.5651 70.1364 13.2672C70.8776 11.9693 71.9239 10.9455 73.2319 10.2244C74.5544 9.48894 76.0368 9.12842 77.6935 9.12842C79.3503 9.12842 80.8327 9.48894 82.1406 10.2244C83.4486 10.9455 84.4804 11.9693 85.2216 13.2672C85.9628 14.5651 86.3406 16.0505 86.3406 17.7233C86.3406 19.3817 85.9628 20.867 85.2071 22.1649C84.4514 23.4628 83.4195 24.4723 82.1116 25.1933C80.7891 25.8855 79.3067 26.246 77.6645 26.246ZM77.6645 22.6841C78.4928 22.6841 79.234 22.4822 79.888 22.0784C80.542 21.6746 81.0652 21.0978 81.4576 20.3479C81.8354 19.598 82.0389 18.7183 82.0389 17.7089C82.0389 16.7138 81.85 15.8341 81.4721 15.0698C81.0942 14.3199 80.5711 13.7287 79.9171 13.3249C79.2631 12.9211 78.5074 12.7048 77.679 12.7048C76.8506 12.7048 76.1094 12.9067 75.4554 13.3249C74.8015 13.7287 74.2783 14.3199 73.9004 15.0698C73.5226 15.8197 73.3336 16.7138 73.3336 17.7233C73.3336 18.7183 73.5226 19.598 73.915 20.3479C74.2928 21.0978 74.816 21.6746 75.47 22.0784C76.0949 22.4822 76.8361 22.6841 77.6645 22.6841Z" fill="#000000"></path><path d="M95.2057 26.1453C93.8251 26.1453 92.7206 25.929 91.9213 25.4964C91.1074 25.0637 90.5406 24.4725 90.2209 23.7514C89.8867 23.016 89.7268 22.1507 89.7268 21.1557V12.806H86.8057V9.4459H89.7268V5.33594H93.985V9.4459H97.8217V12.7915H93.985V20.9249C93.985 21.4874 94.1594 21.92 94.5081 22.2228C94.8569 22.5257 95.4237 22.6699 96.2085 22.6699C96.7026 22.6699 97.2258 22.6122 97.7781 22.5112V25.7415C96.9788 26.0155 96.1213 26.1453 95.2057 26.1453Z" fill="#000000"></path><path d="M105.902 26.2607C104.071 26.2607 102.545 25.8569 101.324 25.0494C100.103 24.2418 99.2749 23.0881 98.8389 21.5739L102.327 20.4058C102.617 21.2567 103.068 21.92 103.664 22.3815C104.26 22.843 105.001 23.0737 105.858 23.0737C106.73 23.0737 107.384 22.9151 107.835 22.6122C108.285 22.3094 108.503 21.8912 108.503 21.4009C108.503 20.9971 108.402 20.6654 108.198 20.4347C107.995 20.1895 107.646 19.9876 107.166 19.8002C106.687 19.6271 105.989 19.4396 105.103 19.2377C103.707 18.9349 102.603 18.5888 101.804 18.1994C101.004 17.8101 100.408 17.3198 100.031 16.6997C99.6527 16.0796 99.4493 15.3152 99.4493 14.3635C99.4493 13.3107 99.7254 12.4022 100.263 11.6091C100.801 10.8159 101.571 10.2102 102.588 9.7632C103.606 9.33057 104.768 9.11426 106.091 9.11426C107.253 9.11426 108.285 9.27289 109.186 9.60457C110.087 9.93625 110.814 10.4266 111.395 11.0755C111.977 11.7244 112.384 12.5176 112.602 13.4405L109.143 14.5942C108.896 13.8732 108.503 13.3107 107.995 12.8925C107.471 12.4888 106.847 12.2724 106.12 12.2724C105.611 12.2724 105.175 12.3301 104.797 12.4599C104.42 12.5897 104.129 12.7772 103.925 13.0223C103.722 13.2675 103.62 13.5559 103.62 13.8876C103.62 14.2625 103.707 14.5654 103.896 14.7817C104.071 14.998 104.405 15.1855 104.87 15.3441C105.335 15.5027 106.018 15.6758 106.905 15.8632C108.373 16.1805 109.535 16.5266 110.364 16.916C111.192 17.2909 111.817 17.7956 112.209 18.4013C112.602 19.0214 112.805 19.8002 112.805 20.7808C112.805 21.8912 112.543 22.843 112.006 23.665C111.468 24.4725 110.683 25.107 109.651 25.5685C108.62 26.03 107.37 26.2607 105.902 26.2607Z" fill="#000000"></path><path d="M121.787 26.1453C120.406 26.1453 119.301 25.929 118.502 25.4964C117.688 25.0637 117.121 24.4725 116.802 23.7514C116.467 23.016 116.308 22.1507 116.308 21.1557V12.806H113.386V9.4459H116.308V5.33594H120.566V9.4459H124.402V12.7915H120.566V20.9249C120.566 21.4874 120.74 21.92 121.089 22.2228C121.438 22.5257 122.005 22.6699 122.789 22.6699C123.283 22.6699 123.807 22.6122 124.359 22.5112V25.7415C123.56 26.0155 122.702 26.1453 121.787 26.1453Z" fill="#000000"></path><path d="M134.081 26.246C132.454 26.246 130.986 25.8855 129.678 25.1789C128.355 24.4723 127.324 23.4628 126.568 22.1649C125.812 20.867 125.434 19.3817 125.434 17.7089C125.434 16.0505 125.812 14.5651 126.553 13.2672C127.295 11.9693 128.341 10.9455 129.649 10.2244C130.971 9.48894 132.454 9.12842 134.111 9.12842C135.767 9.12842 137.25 9.48894 138.558 10.2244C139.866 10.9455 140.897 11.9693 141.639 13.2672C142.38 14.5651 142.758 16.0505 142.758 17.7233C142.758 19.3817 142.38 20.867 141.624 22.1649C140.868 23.4628 139.837 24.4723 138.529 25.1933C137.206 25.8855 135.738 26.246 134.081 26.246ZM134.081 22.6841C134.91 22.6841 135.651 22.4822 136.305 22.0784C136.959 21.6746 137.482 21.0978 137.875 20.3479C138.252 19.598 138.456 18.7183 138.456 17.7089C138.456 16.7138 138.267 15.8341 137.889 15.0698C137.511 14.3199 136.988 13.7287 136.334 13.3249C135.68 12.9211 134.924 12.7048 134.096 12.7048C133.268 12.7048 132.526 12.9067 131.872 13.3249C131.218 13.7287 130.695 14.3199 130.317 15.0698C129.94 15.8197 129.751 16.7138 129.751 17.7233C129.751 18.7183 129.94 19.598 130.332 20.3479C130.71 21.0978 131.233 21.6746 131.887 22.0784C132.526 22.4822 133.253 22.6841 134.081 22.6841Z" fill="#000000"></path><path d="M153.003 26.2605C151.463 26.2605 150.039 25.9432 148.731 25.2943C147.408 24.6453 146.362 23.6792 145.563 22.3957C144.763 21.1122 144.371 19.5692 144.371 17.781C144.371 16.0072 144.749 14.4786 145.519 13.1663C146.289 11.854 147.321 10.859 148.629 10.1523C149.937 9.44571 151.39 9.09961 152.974 9.09961C154.282 9.09961 155.46 9.34476 156.506 9.83508C157.552 10.3254 158.439 10.9887 159.136 11.8396C159.834 12.6904 160.343 13.6566 160.633 14.7382L156.956 15.7909C156.782 15.1852 156.506 14.6517 156.157 14.1902C155.808 13.7287 155.372 13.3538 154.864 13.0798C154.355 12.8058 153.759 12.676 153.105 12.676C152.233 12.676 151.448 12.8923 150.765 13.3105C150.082 13.7287 149.545 14.32 149.167 15.0843C148.789 15.8486 148.585 16.7283 148.585 17.7089C148.585 18.7328 148.789 19.6125 149.196 20.3623C149.603 21.1122 150.155 21.6891 150.838 22.0784C151.521 22.4678 152.262 22.6697 153.076 22.6697C153.73 22.6697 154.311 22.5399 154.835 22.2803C155.358 22.0207 155.794 21.6602 156.157 21.2276C156.52 20.7805 156.797 20.2902 156.985 19.7567L160.648 20.8382C160.386 21.8044 159.921 22.6985 159.253 23.5349C158.584 24.3569 157.712 25.0203 156.637 25.525C155.576 26.0009 154.37 26.2605 153.003 26.2605Z" fill="#000000"></path><path d="M162.726 25.8857V4.49951H166.984V16.0074L173.669 9.44588H178.596L171.475 16.2814L178.552 25.8857H173.582L168.452 18.8483L166.97 20.2327V25.8857H162.726Z" fill="#000000"></path><path d="M13.1815 8.46523C15.3968 8.46523 17.1926 6.68324 17.1926 4.48505C17.1926 2.28687 15.3968 0.504883 13.1815 0.504883C10.9662 0.504883 9.17041 2.28687 9.17041 4.48505C9.17041 6.68324 10.9662 8.46523 13.1815 8.46523Z" fill="#000000"></path><path d="M24.3283 16.7859C22.41 15.6899 19.9539 16.3389 18.8494 18.2424C18.4715 18.8914 18.2971 19.6124 18.3117 20.319C18.3553 22.0784 16.7566 22.9869 15.2452 22.0784C15.1871 22.0496 15.1289 22.0063 15.0563 21.9775C13.5303 21.1266 13.5303 19.324 15.0563 18.4876C16.3061 17.8098 17.1636 16.4975 17.1636 14.9833C17.1636 14.9545 17.1636 14.9256 17.1636 14.8968C17.12 13.1374 18.7186 12.2289 20.23 13.1374C21.4363 13.8729 23.0058 13.9306 24.3138 13.1807C26.2321 12.0847 26.8861 9.64758 25.7816 7.74401C24.6771 5.84045 22.221 5.19151 20.3027 6.2875C18.9947 7.03739 18.2681 8.4218 18.2971 9.82063C18.3407 11.58 16.7421 12.4885 15.2452 11.58C14.6348 11.205 13.9227 10.9887 13.1525 10.9887C12.3822 10.9887 11.6701 11.205 11.0597 11.5656C9.54827 12.4597 7.96417 11.5511 8.00777 9.8062C8.03684 8.39296 7.31019 7.02297 6.00222 6.27308C4.08387 5.17709 1.62779 5.84045 0.523287 7.74401C-0.58122 9.64758 0.087297 12.0847 2.00565 13.1807C3.31362 13.9306 4.88318 13.8585 6.08942 13.1374C7.60085 12.2289 9.18495 13.1374 9.14135 14.8968C9.14135 14.9256 9.14135 14.9545 9.14135 14.9833C9.14135 16.4975 9.98426 17.8098 11.2486 18.4876C12.7746 19.3384 12.7746 21.141 11.2486 21.9775C11.1905 22.0063 11.1324 22.0496 11.0742 22.0784C9.5628 22.9725 7.97871 22.064 8.02231 20.319C8.03684 19.6124 7.86244 18.8914 7.48459 18.228C6.38008 16.3245 3.92401 15.6755 2.00565 16.7715C0.087297 17.8963 -0.566687 20.3335 0.53782 22.237C1.64233 24.1406 4.0984 24.7895 6.01676 23.6935C6.04582 23.6791 6.06035 23.6647 6.08942 23.6503C7.60085 22.7418 9.18495 23.6503 9.14135 25.4096C9.14135 25.4385 9.14135 25.4673 9.14135 25.5106C9.14135 27.7026 10.9434 29.4907 13.1525 29.4907C15.3615 29.4907 17.1636 27.7026 17.1636 25.5106C17.1636 25.4817 17.1636 25.4529 17.1636 25.4241C17.12 23.6647 18.7186 22.7562 20.23 23.6647C20.2591 23.6791 20.2881 23.6935 20.3172 23.7224C22.2356 24.8184 24.6916 24.1694 25.7961 22.2659C26.9007 20.319 26.2467 17.8819 24.3283 16.7859Z" fill="#000000"></path></g>
  </svg>
</div>
  <a href="https://optimism.io"><img alt="Optimism" src="https://raw.githubusercontent.com/ethereum-optimism/brand-kit/main/assets/svg/OPTIMISM-R.svg" width=600></a>
  <br />
  <h3><a href="https://optimism.io">Optimism</a> is <del>Ethereum</del> <ins>Rootstock</ins>, scaled.</h3>
  <br />
</div>

# Guide to setup local L1 and L2 development nodes

You will need **5 TTYs** for running the both **L1** and **L2** nodes.
For the purpose of this guide we will assume:

```shell
export PATH_RSKSMART="$HOME/src/rsksmart/"
```

This is illustrative, but by all means, set it in each TTY to copy-paste from this guide and/or set it to your desired location.

#### TTY 1

1. clone op-geth to serve as the sequencer client and build it

    ```shell
    cd $PATH_RSKSMART  # if not there already
    git clone git@github.com:rsksmart/op-geth.git
    cd op-geth
    git swich rsk/poc-v0
    make geth
    ```


2. clone this repo and switch to this branch:

    ```shell
    cd $PATH_RSKSMART  # if not there already
    git clone git@github.com:rsksmart/optimism.git
    cd optimism
    git switch rsk/poc-v0
    ```

3. make a copy of the `.envrc.example` and configure it according to:

    [fill-out-environment-variables](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#fill-out-environment-variables) optimism documentation

    ```shell
    cd $PATH_RSKSMART/optimism # if not there already
    make rsk-env # this will also create the configuration in the future
    ```

      > [!NOTE]
      > These congfs shell be automated in the near future (//TODO:).

      - additionally, to make the use of the rsk make targets configure following env vars:

    ```shell
    # path to optimism
    export PATH_OPSTACK="$PATH_RSKSMART/optimism"

    # path to bedrock contracts
    export PATH_CONTRACTS="$PATH_OPSTACK/packages/contracts-bedrock"

    # paths to clients
    export PATH_CLIENT_CONSENSUS="$PATH_OPSTACK/op-node"
    export PATH_CLIENT_SEQUENCING="$PATH_RSKSMART/op-geth"

    # regtest 33
    export L1_CHAIN_ID=33
    ```

      - also change:
      ```shell
      export DEPLOYMENT_CONTEXT=regtest
      ```

    > [!IMPORTANT]
    > run `direnv allow` to load the environment variables after change.

4. run your favourite **L1 node**:

    - in docker

    ```shell
    make rsk-regtest-start-log
    ```

    - from jar

    ```shell
    #TODO:
    ```

#### TTY 2 ([start op geth](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#start-op-geth))

5. build the internal packages and run sequencer client with

    ```shell
    make rsk-build
    make rsk-sequencer-fresh # this consists of rsk-wallets rsk-config rsk-create2 rsk-deploy rsk-deploy-sync rsk-create-genesis rsk-jwt rsk-sequencer-init rsk-sequencer-run
    ```

#### TTY 3 ([start op node](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#start-op-node))

6. run consensus client

    ```shell
    make rsk-consensus-run
    ```

#### TTY 4 ([start op batcher](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#start-op-batcher))

7. run batcher client

    ```shell
    make rsk-batcher-run
    ```

#### TTY 5 ([start op proposer](https://docs.optimism.io/builders/chain-operators/tutorials/create-l2-rollup#start-op-proposer))

8. run proposer client

    ```shell
    make rsk-proposer-run
    ```

---

| :rocket:    | Liftoff, We Have Liftoff|
|---------------|:----------------------------------------|
||[get hacking](https://docs.optimism.io/builders/chain-operators/hacks/overview)|
